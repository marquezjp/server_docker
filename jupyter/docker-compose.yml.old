services:
  jupyter:
    image: quay.io/jupyter/datascience-notebook
    container_name: jupyter
    runtime: nvidia
    hostname: jupyter
    restart: always
    ports:
      - 10000:8888
    environment:
      - JUPYTER_PASSWORDSourceType=File 
      - JUPYTER_PASSWORDSource=/conf/.jupyter_notebook_password
      - NVIDIA_VISIBLE_DEVICES=all
      - CUDA_DEVICE_ORDER=PCI_BUS_ID
    volumes:
      - ./work:/home/jovyan
      - ./conf/jupyter_notebook_config.json:/root/.jupyter/jupyter_notebook_config.json
      - jupyter-data:/home/jovyan/.local/share/jupyter
    networks:
      - jotape-network

volumes:
  jupyter-data:

networks:
  jotape-network:
    driver: bridge
